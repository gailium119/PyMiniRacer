
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://bpcreech.com/PyMiniRacer/contributing/">
      
      
        <link rel="prev" href="../api/">
      
      
        <link rel="next" href="../architecture/">
      
      
      <link rel="icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Contributing - PyMiniRacer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contributing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PyMiniRacer" class="md-header__button md-logo" aria-label="PyMiniRacer" data-md-component="logo">
      
  <img src="../py_mini_racer.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyMiniRacer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contributing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PyMiniRacer" class="md-nav__button md-logo" aria-label="PyMiniRacer" data-md-component="logo">
      
  <img src="../py_mini_racer.png" alt="logo">

    </a>
    PyMiniRacer
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types-of-contributions" class="md-nav__link">
    <span class="md-ellipsis">
      Types of Contributions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types of Contributions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#report-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Report Bugs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Fix Bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-features" class="md-nav__link">
    <span class="md-ellipsis">
      Implement Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Write Documentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-feedback" class="md-nav__link">
    <span class="md-ellipsis">
      Submit Feedback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-started" class="md-nav__link">
    <span class="md-ellipsis">
      Get Started!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pull-request-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Pull Request Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasing-pyminiracer" class="md-nav__link">
    <span class="md-ellipsis">
      Releasing PyMiniRacer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Releasing PyMiniRacer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ordinary-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Ordinary releases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotfix-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Hotfix releases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../authors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    History
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types-of-contributions" class="md-nav__link">
    <span class="md-ellipsis">
      Types of Contributions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types of Contributions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#report-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Report Bugs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Fix Bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-features" class="md-nav__link">
    <span class="md-ellipsis">
      Implement Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Write Documentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-feedback" class="md-nav__link">
    <span class="md-ellipsis">
      Submit Feedback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-started" class="md-nav__link">
    <span class="md-ellipsis">
      Get Started!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pull-request-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Pull Request Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasing-pyminiracer" class="md-nav__link">
    <span class="md-ellipsis">
      Releasing PyMiniRacer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Releasing PyMiniRacer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ordinary-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Ordinary releases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotfix-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Hotfix releases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h1>
<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and
credit will always be given.</p>
<h2 id="types-of-contributions">Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permanent link">&para;</a></h2>
<p>You can contribute in many ways:</p>
<h3 id="report-bugs">Report Bugs<a class="headerlink" href="#report-bugs" title="Permanent link">&para;</a></h3>
<p>Report bugs at <a href="https://github.com/bpcreech/PyMiniRacer/issues">https://github.com/bpcreech/PyMiniRacer/issues</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul>
<li>Your operating system name and version.</li>
<li>Any details about your local setup that might be helpful in troubleshooting.</li>
<li>Detailed steps to reproduce the bug.</li>
</ul>
<h3 id="fix-bugs">Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permanent link">&para;</a></h3>
<p>Look through the GitHub issues for bugs. Anything tagged with "bug" is open to whoever
wants to implement it.</p>
<h2 id="implement-features">Implement Features<a class="headerlink" href="#implement-features" title="Permanent link">&para;</a></h2>
<p>Look through the GitHub issues for features. Anything tagged with "feature" is open to
whoever wants to implement it.</p>
<h2 id="write-documentation">Write Documentation<a class="headerlink" href="#write-documentation" title="Permanent link">&para;</a></h2>
<p>Python Mini Racer could always use more documentation, whether as part of the official
Python Mini Racer docs, in docstrings, or even on the web in blog posts, articles, and
such.</p>
<h2 id="submit-feedback">Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permanent link">&para;</a></h2>
<p>The best way to send feedback is to file an issue at
<a href="https://github.com/bpcreech/PyMiniRacer/issues">https://github.com/bpcreech/PyMiniRacer/issues</a>.</p>
<p>If you are proposing a feature:</p>
<ul>
<li>Explain in detail how it would work.</li>
<li>Keep the scope as narrow as possible, to make it easier to implement.</li>
<li>Remember that this is a volunteer-driven project, and that contributions are welcome
    :)</li>
</ul>
<h2 id="get-started">Get Started!<a class="headerlink" href="#get-started" title="Permanent link">&para;</a></h2>
<p>Ready to contribute? Here's how to set up <code>PyMiniRacer</code> for local development.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Building this package from source takes several GB of disk space and takes 1-2 hours.</p>
</div>
<ol>
<li>
<p>Do a quick scan through <a href="../architecture/">the architecture guide</a> before diving in.</p>
</li>
<li>
<p>Fork the <code>PyMiniRacer</code> repo on GitHub.</p>
</li>
<li>
<p>If you plan to change C++ code you should probably install at least <code>clang-format</code>
    and <code>clang-tidy</code> from <a href="https://releases.llvm.org/">the latest stable LLVM</a>. While
    the <code>PyMiniRacer</code> build uses its own compiler (!) on most systems, our pre-commit
    rules rely on the system <code>clang-format</code> and <code>clang-tidy</code>. If your versions of those
    utilities do not match the ones <code>PyMiniRacer</code> uses on GitHub Actions, you may see
    spurious pre-commit errors.</p>
<p>If you're on a Debian-related Linux distribution using the LLVM project's standard
apt packages, note that you will likely have to override <code>/usr/bin/clang-format</code>
and <code>/usr/bin/clang-tidy</code> to point to the latest version, i.e.,
<code>/usr/bin/clang-format-18</code> and <code>/usr/bin/clang-tidy-18</code>, respectively.</p>
<p>You can always silence local pre-commit errors with the <code>-n</code> argument to
<code>git commit</code>. We check <code>pre-commit</code>s on every pull request using GitHub Actions, so
you can check for errors there instead.</p>
</li>
<li>
<p>Run some of the following:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="c1"># Set up a virtualenv:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>~/my_venv
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span>$<span class="w"> </span>.<span class="w"> </span>~/my_venv/bin/activate
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pre-commit<span class="w"> </span>hatch<span class="w"> </span>hatch-mkdocs
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="c1"># Set up a local clone of your fork:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:your_name_here/PyMiniRacer.git
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>PyMiniRacer/
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span>$<span class="w"> </span>pre-commit<span class="w"> </span>install<span class="w">  </span><span class="c1"># install our pre-commit hooks</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="c1"># Build and test stuff:</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>docs:serve<span class="w">  </span><span class="c1"># build the docs you&#39;re reading now!</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>build<span class="w">  </span><span class="c1"># this may take 1-2 hours!</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>test:run
</span></code></pre></div>
<p>You can also play with your build in the Python REPL, as follows:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>shell
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span>$<span class="w"> </span>python
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span>from<span class="w"> </span>py_mini_racer<span class="w"> </span>import<span class="w"> </span>MiniRacer
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">mr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>MiniRacer<span class="o">()</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span>mr.eval<span class="o">(</span><span class="s1">&#39;6*7&#39;</span><span class="o">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="m">42</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span>exit<span class="o">()</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span>$<span class="w"> </span><span class="nb">exit</span>
</span></code></pre></div>
<p>As a shortcut for iterative development, you can skip the <code>hatch build</code> and matrix
tests, and do:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">    </span>$<span class="w"> </span>python<span class="w"> </span>helpers/v8_build.py<span class="w"> </span><span class="o">[</span>--skip-fetch<span class="o">]</span><span class="w">  </span><span class="c1"># will install a DLL into src/py_mini_racer</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span>$<span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>src<span class="w"> </span>pytest<span class="w">  </span><span class="c1"># run the tests</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span>$<span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>src<span class="w"> </span>python<span class="w">  </span><span class="c1"># play with the build in the REPL</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span>from<span class="w"> </span>py_mini_racer<span class="w"> </span>import<span class="w"> </span>MiniRacer
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span>&gt;&gt;&gt;<span class="w"> </span>...
</span></code></pre></div>
</li>
<li>
<p>Create a branch for local development::</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="w">    </span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>name-of-your-bugfix-or-feature
</span></code></pre></div>
<p>Now you can make your changes locally.</p>
</li>
<li>
<p>When you're done making changes, check that your changes pass the linter and the
    tests, including testing other Python versions:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">   </span>$<span class="w"> </span>pre-commit<span class="w"> </span>run<span class="w">  </span><span class="c1"># run formatters and linters</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">   </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>docs:serve<span class="w">  </span><span class="c1"># look at the docs if you changed them!</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">   </span>$<span class="w"> </span>hatch<span class="w"> </span>build<span class="w">  </span><span class="c1"># this may take 1-2 hours!</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">   </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>test:run
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">   </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>test:run-coverage<span class="w">  </span><span class="c1"># with coverage!</span>
</span></code></pre></div>
</li>
<li>
<p>Commit your changes and push your branch to GitHub::</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="w">   </span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">   </span>$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Your detailed description of your changes.&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">   </span>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>name-of-your-bugfix-or-feature
</span></code></pre></div>
</li>
<li>
<p>(Optional) Run the GitHub Actions build workflow on your fork to ensure that all
    architectures work.</p>
</li>
<li>
<p>Submit a pull request through the GitHub website.</p>
</li>
</ol>
<h2 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">&para;</a></h2>
<p>If you want to run the tests, you need to build the package first:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>build
</span></code></pre></div>
<p>Then run:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span>
</span></code></pre></div>
<p>Or for the full test matrix:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>test:run
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span>$<span class="w"> </span>hatch<span class="w"> </span>run<span class="w"> </span>test:run-coverage<span class="w">  </span><span class="c1"># with coverage!</span>
</span></code></pre></div>
<h2 id="pull-request-guidelines">Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Permanent link">&para;</a></h2>
<p>Before you submit a pull request, check that it meets these guidelines:</p>
<ol>
<li>The pull request should include tests.</li>
<li>If the pull request adds functionality, the docs should be updated. Put your new
    functionality into a function with a docstring, and add the feature to the list in
    README.md.</li>
<li>The pull request should work for the entire test matrix of Python versions
    (<code>hatch run tests:run</code>).</li>
</ol>
<h2 id="releasing-pyminiracer">Releasing <code>PyMiniRacer</code><a class="headerlink" href="#releasing-pyminiracer" title="Permanent link">&para;</a></h2>
<p>Releases for <code>PyMiniRacer</code> should be done by GitHub Actions on the official project
repository.</p>
<h3 id="ordinary-releases">Ordinary releases<a class="headerlink" href="#ordinary-releases" title="Permanent link">&para;</a></h3>
<p>To make an ordinary release from <code>main</code>:</p>
<ol>
<li>
<p>Merge all changes into <code>main</code> on the official repository.</p>
</li>
<li>
<p>Pick the next revision number:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$<span class="w"> </span>git<span class="w"> </span>fetch
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>$<span class="w"> </span>git<span class="w"> </span>ls-remote<span class="w"> </span>origin<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>refs/heads/release
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># observe the next available release version</span>
</span></code></pre></div>
</li>
<li>
<p>Create a <code>feature/...</code> branch, and:</p>
<ol>
<li>
<p>Update <code>HISTORY.md</code> with a summary of changes since the last release.</p>
</li>
<li>
<p>Update <code>src/py_mini_racer/__about__.py</code> with the new revision number.</p>
</li>
<li>
<p>Create and merge a pull request for this branch into <code>main</code>.</p>
</li>
</ol>
</li>
<li>
<p>Create a <code>release/...</code> branch:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>main
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>$<span class="w"> </span>git<span class="w"> </span>pull
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nv">NEXT_RELEASE</span><span class="o">=</span>the<span class="w"> </span>next<span class="w"> </span>tag,<span class="w"> </span>starting<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>letter<span class="w"> </span>v.<span class="w"> </span>E.g.,<span class="w"> </span><span class="s2">&quot;v0.12.1&quot;</span>.
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span><span class="s2">&quot;release/</span><span class="si">${</span><span class="nv">NEXT_RELEASE</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span><span class="s2">&quot;release/</span><span class="si">${</span><span class="nv">NEXT_RELEASE</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div>
</li>
<li>
<p>Observe the build process on GitHub Actions. It should build and push docs and upload
    wheels to PyPI automatically.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of this writing, the <code>aarch64</code> Linux builds are slow because they're running on
emulation. They time out on the first try (and second and third and...) after 6
hours. If you "restart failed jobs", they will quickly catch up to where where they
left off due to <a href="https://github.com/mozilla/sccache"><code>sccache</code></a>. The jobs should
<em>eventually</em> complete within the time limit. You can observe their slow progress
using the Ninja build status (e.g., <code>[1645/2312] CXX obj/v8_foo_bar.o</code>).</p>
</div>
</li>
</ol>
<h3 id="hotfix-releases">Hotfix releases<a class="headerlink" href="#hotfix-releases" title="Permanent link">&para;</a></h3>
<p>To hotfix a prior release:</p>
<ol>
<li>
<p>Prepare the fix as a <code>feature</code> branch as normal, and merge it into <code>main</code>.</p>
</li>
<li>
<p>Pick the next revision number. This will typically be a patch-version update on the
    current release name.</p>
</li>
<li>
<p>Create a new release branch for the hotfix:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nv">BASE_RELEASE</span><span class="o">=</span>the<span class="w"> </span>release<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>hotfixing,<span class="w"> </span>starting<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>letter<span class="w"> </span>v.<span class="w"> </span>E.g.,<span class="w"> </span><span class="s2">&quot;v0.12.0&quot;</span>.
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nv">NEXT_RELEASE</span><span class="o">=</span>the<span class="w"> </span>next<span class="w"> </span>tag,<span class="w"> </span>starting<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>letter<span class="w"> </span>v.<span class="w"> </span>E.g.,<span class="w"> </span><span class="s2">&quot;v0.12.1&quot;</span>.
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span><span class="s2">&quot;release/</span><span class="si">${</span><span class="nv">BASE_RELEASE</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>$<span class="w"> </span>git<span class="w"> </span>pull
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span><span class="s2">&quot;release/</span><span class="si">${</span><span class="nv">NEXT_RELEASE</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div>
</li>
<li>
<p>Hotfix the commit(s) created in step #1 onto the new release branch.</p>
</li>
<li>
<p>Create a version update commit:</p>
<ol>
<li>
<p>Update <code>HISTORY.md</code> with a summary of changes since the last release.</p>
</li>
<li>
<p>Update <code>src/py_mini_racer/__about__.py</code> with the new revision number.</p>
</li>
</ol>
</li>
<li>
<p>Commit and push the new release branch to GitHub.</p>
</li>
<li>
<p>Merge this branch into <code>main</code>. <em>All content on release branches should be included in
    <code>main</code>.</em></p>
</li>
<li>
<p>Observe the build process on GitHub Actions. It should build and push docs and upload
    wheels to PyPI automatically.</p>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>